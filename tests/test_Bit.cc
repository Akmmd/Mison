#include <iostream>
#include "gtest/gtest.h"
#include "Bit.h"
#include <climits>  

using namespace std;
using namespace meng;
TEST(Bit, Bit_bitmap1) {
  std::string str("1111111111111111111111111111111111111111111111111111111111111111");
  BitMap bits = meng::Building_Structural_Character_Bitmaps(str, '1');
  ASSERT_EQ(bits[0], -1);
  ASSERT_EQ(bits.length(), 1);
}

TEST(Bit, Bit_bitmap2) {
  std::string str("01111111111111111111111111111111111111111111111111111111111111111");
  BitMap bits = meng::Building_Structural_Character_Bitmaps(str, '1');
  ASSERT_EQ(bits[0], -2);
  ASSERT_EQ(bits.length(), 2);
}

TEST(Bit, Bit_bitmap3) {
  std::string str("1100101001110001011101101001100011111011100011110000111111000011100000010011110010011100101100000100101111100101010100010101111101110001111110111101001011100010001010101000011100100010100010010011000100011101110011011010011110010011010100100101000101011100000011110110000010110001100000100101001010010111110010101111101111111011010000101100110001111000011110010110100010011011010111010110011001011111110101000110011010010010110001101111111100100111110111000011101000111000100111001000101100010100111100110101101001011101111001000010001011101001010101100000100101001101111000001011101101010010011101011001001100001011111100001111001101001111011111010100100010000110000111010000111101000001001011011000110010001110010000001110010100011010010000011011010111010010010011011111110010001010110111000001100010001011011010000011111111010111110001100001111110010001110100111111010010101011000000011011000010111110001100000010110011001000011110010100110011000010");
  BitMap bits = meng::Building_Structural_Character_Bitmaps(str, '1');
  int dis = bits.to_string().length() - str.length();
  for(int i=0; i<dis; i++) str += "0";
  ASSERT_EQ(bits.to_string(), str);
}

TEST(Bit, Bit_R) {
  ASSERT_EQ(R(-1), -2);
  ASSERT_EQ(R(-2), -4);
  ASSERT_EQ(R(1), 0);
  ASSERT_EQ(R(2), 0);
  ASSERT_EQ(R(3), 2);
  ASSERT_EQ(R(5), 4);
}

TEST(Bit, Bit_E) {
  ASSERT_EQ(E(-1), 1);
  ASSERT_EQ(E(-2), 2);
  ASSERT_EQ(E(3), 1);
  ASSERT_EQ(E(4), 4);
  ASSERT_EQ(E(6), 2);
}

TEST(Bit, Bit_S) {
  ASSERT_EQ(S(-1), 1);
  ASSERT_EQ(S(-2), 3);
  ASSERT_EQ(S(2), 3);
  ASSERT_EQ(S(3), 1);
  ASSERT_EQ(S(6), 3);
}